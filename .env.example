# ============================================
# SHADESPACE CONFIGURATOR - ENVIRONMENT VARIABLES
# ============================================
# This file documents all required environment variables for the ShadeSpace configurator.
# Copy this file to .env and fill in your actual values.

# ============================================
# FRONTEND CONFIGURATION
# ============================================
# These variables are used by the React/Vite frontend application
# They must be prefixed with VITE_ to be exposed to the client

# Supabase Project Configuration
# Get these from: https://app.supabase.com/project/_/settings/api
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key-here

# ============================================
# SUPABASE EDGE FUNCTIONS (Backend Secrets)
# ============================================
# These are configured in the Supabase dashboard under:
# Project Settings > Edge Functions > Secrets
# Or via Supabase CLI: supabase secrets set VARIABLE_NAME=value

# Supabase Internal Configuration
# These are automatically available in Supabase Edge Functions, but can be set explicitly
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Shopify Integration
# Required for customer creation and tracking
# Create a custom app in Shopify Admin: Settings > Apps and sales channels > Develop apps
# Required scopes: read_customers, write_customers
SHOPIFY_SHOP_DOMAIN=your-store.myshopify.com
SHOPIFY_ADMIN_API_TOKEN=shpat_your_admin_api_token_here

# Email Configuration (SMTP)
# Required for sending quote summaries and notifications
# Use your email service provider's SMTP settings (Gmail, SendGrid, Mailgun, etc.)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
FROM_EMAIL=sails@shadespace.com

# ============================================
# ANALYTICS CONFIGURATION
# ============================================
# Google Analytics 4 Measurement ID
# This is hardcoded in src/utils/analytics.ts (line 27)
# Current value: G-V8131RB72K
# To change it, edit the trackPageView function in src/utils/analytics.ts

# ============================================
# SETUP INSTRUCTIONS
# ============================================

# 1. SUPABASE SETUP
# ------------------
# - Create a project at https://supabase.com
# - Go to Project Settings > API
# - Copy the Project URL to VITE_SUPABASE_URL
# - Copy the anon/public key to VITE_SUPABASE_ANON_KEY
# - Run the migrations in supabase/migrations/ to create required tables
# - Set up Edge Functions secrets via Supabase CLI or dashboard

# 2. SHOPIFY SETUP
# ----------------
# - Log into your Shopify Admin panel
# - Go to Settings > Apps and sales channels > Develop apps
# - Create a new app with the following scopes:
#   * read_customers
#   * write_customers
# - Install the app and copy the Admin API access token
# - Your shop domain is: yourstore.myshopify.com (not the custom domain)

# 3. SMTP/EMAIL SETUP
# -------------------
# For Gmail:
# - SMTP_HOST=smtp.gmail.com
# - SMTP_PORT=587
# - SMTP_USER=your-email@gmail.com
# - SMTP_PASS=your-app-specific-password (not your regular password)
# - Enable 2FA and create an app-specific password

# For SendGrid:
# - SMTP_HOST=smtp.sendgrid.net
# - SMTP_PORT=587
# - SMTP_USER=apikey
# - SMTP_PASS=your-sendgrid-api-key

# For Mailgun:
# - SMTP_HOST=smtp.mailgun.org
# - SMTP_PORT=587
# - SMTP_USER=postmaster@your-domain.mailgun.org
# - SMTP_PASS=your-mailgun-smtp-password

# 4. DATABASE SETUP
# -----------------
# Required tables:
# - saved_quotes: Stores customer quote configurations
#
# Required functions:
# - generate_quote_reference(): Generates unique quote reference codes
#
# Run migrations:
# supabase db push
# or apply them manually via the Supabase SQL editor

# 5. DEPLOYING EDGE FUNCTIONS
# ---------------------------
# The project includes 4 Supabase Edge Functions:
# - save-quote: Saves and retrieves customer quotes
# - add-shopify-customer: Creates/updates Shopify customers
# - send-email-summary: Sends quote summary emails
# - generate-pdf: Generates PDF quote documents
#
# Deploy via Supabase CLI:
# supabase functions deploy save-quote
# supabase functions deploy add-shopify-customer
# supabase functions deploy send-email-summary
# supabase functions deploy generate-pdf

# 6. SECURITY NOTES
# -----------------
# - NEVER commit the .env file to version control
# - Keep the .env.example file updated when adding new variables
# - Use environment-specific values for development, staging, and production
# - Rotate API keys and tokens regularly
# - Use restrictive RLS policies on Supabase tables
# - Validate and sanitize all user inputs

# ============================================
# TROUBLESHOOTING
# ============================================

# Issue: Save Quote modal not opening
# Solution: Verify VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY are set correctly

# Issue: Shopify customer not being created
# Solution: Check SHOPIFY_SHOP_DOMAIN and SHOPIFY_ADMIN_API_TOKEN are correct
#          Verify the Shopify app has read_customers and write_customers scopes

# Issue: Emails not sending
# Solution: Verify SMTP credentials are correct
#          Check that FROM_EMAIL is authorized to send via your SMTP provider
#          Test SMTP connection using a tool like telnet or smtp-tester

# Issue: Database errors
# Solution: Ensure all migrations in supabase/migrations/ have been applied
#          Check RLS policies are configured correctly
#          Verify the generate_quote_reference() function exists

# ============================================
# SUPPORT
# ============================================
# For issues or questions:
# - Supabase Docs: https://supabase.com/docs
# - Shopify API Docs: https://shopify.dev/docs/api/admin-rest
# - Project Repository: [Your GitHub/GitLab URL]
